"use strict";function _classCallCheck(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,a){for(var e=0;e<a.length;e++){var n=a[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,a,e){return a&&_defineProperties(t.prototype,a),e&&_defineProperties(t,e),t}var Cart=function(){function t(){_classCallCheck(this,t),this.login=$(".login"),this.index=$(".index"),this.cart=$(".cart"),this.cartTabel=$(".cart-tabel"),this.btnClick(),this.init()}return _createClass(t,[{key:"btnClick",value:function(){this.login.click(function(){location.href="../pages/login.html"}),this.index.click(function(){location.href="../index.html"})}},{key:"init",value:function(){if(!0,0===(localStorage.getItem("wh-cart")?localStorage.getItem("wh-cart"):"").length)this.cart.css("display","block"),this.cartTabel.css("display","none");else{this.cart.css("display","none"),this.cartTabel.css("display","block");var t,a=cover(localStorage.getItem("wh-cart"));for(t in a){var e=priceToNUm(a[t].price),n=$(".cart-tabel").html();n+='\n          <div class="cart-table d-flex jc-around ai-center" data-p-id="'.concat(t,'">\n          <div class="pMessage d-flex jc-start ai-center">\n            <div class="img">\n              <img src="../img/list/R2webp.webp" alt="">\n            </div>\n            <div class="message">\n              <h2>').concat(a[t].name,'</h2>\n              <div class="tips">').concat(a[t].tips,'</div>\n              </div>\n            </div>\n          <div class="price">').concat("￥"+e+".00",'</div>\n          <div class="num d-flex jc-around ai-center">\n            <span class="less"></span>\n            <span class="num">').concat(a[t].num,'</span>\n            <span class="add"></span>\n          </div>\n          <div class="count">').concat("￥"+e*a[t].num+".00",'</div >\n          <div class="operating"></div>\n        </div >\n        '),this.cartTabel.html(n),this.add(),this.less(),this.colseEle()}}}},{key:"add",value:function(){var e=$(".add");e.click(function(){var t=e.parent().parent().attr("data-p-id"),a=cover(localStorage.getItem("wh-cart")?localStorage.getItem("wh-cart"):"");a[t].num++,localStorage.setItem("wh-cart",JSON.stringify(a));e.prev().html(),a[t].num;window.location.reload()})}},{key:"less",value:function(){var e=$(".less");e.click(function(){var t=e.parent().parent().attr("data-p-id"),a=cover(localStorage.getItem("wh-cart")?localStorage.getItem("wh-cart"):"");1===a[t].num?a[t].num=1:a[t].num--,localStorage.setItem("wh-cart",JSON.stringify(a));e.next().html(),a[t].num;window.location.reload()})}},{key:"colseEle",value:function(){var t=$(".operating");t.click(function(){t.parent().parent().attr("data-p-id"),cover(localStorage.getItem("wh-cart")?localStorage.getItem("wh-cart"):"");localStorage.removeItem("wh-cart"),t.parent().remove(),window.location.reload()})}}]),t}();function cover(t){return t?JSON.parse(t):{}}function priceToNUm(t){t=t.slice(1,t.length);return parseFloat(t.split(",").join(""),2)}new Cart;